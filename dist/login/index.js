(()=>{var i="https://bro-cloud.herokuapp.com",c=class{constructor(t=null){this.state={},this.customFn=t}updateState(t,o){this.state[t]=o}eventListener(t){let o=t.target.name,r=t.target.value;this.updateState.apply(this,[o,r])}init(t){let o=t.children;for(let r of o)(r.nodeName==="INPUT"||r.nodeName==="SELECT")&&r.addEventListener("input",this.eventListener.bind(this))}formData(){return this.state}},u=e=>{let t=document.querySelector(".error"),o=document.createTextNode(e);t.appendChild(o),setTimeout(()=>{t.innerText=""},2e4)},d=e=>{localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("userSignedUp",!0)},m=e=>{window.location.replace(`${i}/music/${e.clubId}/${e._id}`)};var l=JSON.parse(localStorage.getItem("user")),s={headers:{"Content-Type":"application/json"},method:"POST"},a=async(e,t,o)=>{if(l){let{clubId:n,_id:g}=l;s.headers.Authorization=`${g} ${n}`}t&&(s.body=JSON.stringify(t)),o&&(s.method=o);let r=await fetch(i+e,s);if(r.status>=200&&r.status<=299){let n=await r.json();return Promise.resolve(n)}u(r.error)},p={signupJoin:async(e,t)=>{let o=await a(`/signup/join/${t}`,e);return Promise.resolve(o)},signupCreate:async(e,t)=>{let o=await a(`/signup/create/${t}`,e);return Promise.resolve(o)},search:async e=>{let t=await a("/youtube-api/search",e);return Promise.resolve(t)},addVideo:async e=>{let t=await a("/music/addVideo",e);return Promise.resolve(t)},login:async e=>{let t=await a("/login",e);return Promise.resolve(t)}};var f=new c;window.onload=()=>{let e=document.getElementsByTagName("form")[0];f.init(e),e.addEventListener("submit",h)};async function h(e){e.preventDefault();let t=f.formData(),{user:o}=await p.login(t);d(o),m(o)}})();
//# sourceMappingURL=index.js.map
