(()=>{var n="http://localhost:3000",c=class{constructor(t=null){this.state={},this.customFn=t}updateState(t,o){this.state[t]=o}eventListener(t){let o=t.target.name,r=t.target.value;this.updateState.apply(this,[o,r])}init(t){let o=t.children;for(let r of o)(r.nodeName==="INPUT"||r.nodeName==="SELECT")&&r.addEventListener("input",this.eventListener.bind(this))}formData(){return this.state}},d=e=>{let t=document.querySelector(".error"),o=document.createTextNode(e);t.appendChild(o),setTimeout(()=>{t.innerText=""},2e4)},m=e=>{localStorage.setItem("user",JSON.stringify(e))},u=e=>{window.location.replace(`${n}/music/${e.clubId}/${e._id}`)};var l=JSON.parse(localStorage.getItem("user")),s={headers:{"Content-Type":"application/json"},method:"POST"},a=async(e,t,o)=>{if(l){let{clubId:g,_id:h}=l;s.headers.Authorization=`${h} ${g}`}t&&(s.body=JSON.stringify(t)),o&&(s.method=o);let r=await fetch(n+e,s),i=await r.json();if(r.status>=200&&r.status<=299)return Promise.resolve(i);d(i.error)},p={signupJoin:async(e,t)=>{let o=await a(`/signup/join/${t}`,e);return Promise.resolve(o)},signupCreate:async(e,t)=>{let o=await a(`/signup/create/${t}`,e);return Promise.resolve(o)},search:async e=>{let t=await a("/youtube-api/search",e);return Promise.resolve(t)},addVideo:async e=>{let t=await a("/music/addVideo",e);return Promise.resolve(t)},login:async e=>{let t=await a("/login",e);return Promise.resolve(t)}};var f=new c;window.onload=()=>{let e=document.getElementsByTagName("form")[0];f.init(e),e.addEventListener("submit",S)};async function S(e){e.preventDefault();let t=f.formData(),{user:o}=await p.login(t);m(o),u(o)}})();
//# sourceMappingURL=index.js.map
