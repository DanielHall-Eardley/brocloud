(()=>{var n="https://brocloud.ca",c=class{constructor(t=null){this.state={},this.customFn=t}updateState(t,o){this.state[t]=o}eventListener(t){let o=t.target.name,a=t.target.value;this.updateState.apply(this,[o,a])}init(t){let o=t.children;for(let a of o)(a.nodeName==="INPUT"||a.nodeName==="SELECT")&&a.addEventListener("input",this.eventListener.bind(this))}formData(){return this.state}},u=e=>{let t=document.querySelector(".error"),o=document.createTextNode(`${e.message}. Status: ${e.status}`);t.appendChild(o),setTimeout(()=>{t.innerText=""},2e4)},d=e=>{localStorage.setItem("user",JSON.stringify(e))},m=e=>{window.location.replace(`${n}/music/${e.clubId}/${e._id}`)};var l=JSON.parse(localStorage.getItem("user")),r={headers:{"Content-Type":"application/json"},method:"POST"},s=async(e,t,o)=>{if(l){let{clubId:g,_id:h}=l;r.headers.Authorization=`${h} ${g}`}t&&(r.body=JSON.stringify(t)),o&&(r.method=o);let a=await fetch(n+e,r),i=await a.json();if(a.status>=200&&a.status<=299)return Promise.resolve(i);u(i)},p={signupJoin:async(e,t)=>{let o=await s(`/signup/join/${t}`,e);return Promise.resolve(o)},signupCreate:async(e,t)=>{let o=await s(`/signup/create/${t}`,e);return Promise.resolve(o)},search:async e=>{let t=await s("/youtube-api/search",e);return Promise.resolve(t)},addVideo:async e=>{let t=await s("/music/addVideo",e);return Promise.resolve(t)},login:async e=>{let t=await s("/login",e);return Promise.resolve(t)}};var f=new c;window.onload=()=>{let e=document.getElementsByTagName("form")[0];f.init(e),e.addEventListener("submit",S)};async function S(e){e.preventDefault();let t=f.formData(),{user:o}=await p.login(t);d(o),m(o)}})();
//# sourceMappingURL=index.js.map
