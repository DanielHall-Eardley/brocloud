(()=>{var i="http://localhost:3000",c=class{constructor(t=null){this.state={},this.customFn=t}updateState(t,o){this.state[t]=o}eventListener(t){let o=t.target.name,a=t.target.value;this.updateState.apply(this,[o,a])}init(t){let o=t.children;for(let a of o)if(a.nodeName==="INPUT"||a.nodeName==="SELECT"){let r=a.name;this.state[r]="",a.addEventListener("input",this.eventListener.bind(this))}}formData(){return this.state}},m=e=>{let t=document.querySelector(".error"),o=document.createTextNode(`${e.message}. Status: ${e.status}`);t.appendChild(o),setTimeout(()=>{t.innerText=""},2e4)},u=e=>{localStorage.setItem("user",JSON.stringify(e))},l=e=>{window.location.replace(`${i}/music/${e.clubId}/${e._id}`)};var d=JSON.parse(localStorage.getItem("user")),n={headers:{"Content-Type":"application/json"},method:"POST"},s=async(e,t,o)=>{if(d){let{clubId:f,_id:h}=d;n.headers.Authorization=`${h} ${f}`}t&&(n.body=JSON.stringify(t)),o&&(n.method=o);let a=await fetch(i+e,n),r=await a.json();if(a.status>=200&&a.status<=299)return Promise.resolve(r);m(r)},p={signupJoin:async e=>{let t=await s("/signup/join",e);return Promise.resolve(t)},signupCreate:async e=>{let t=await s("/signup/create",e);return Promise.resolve(t)},search:async e=>{let t=await s("/youtube-api/search",e);return Promise.resolve(t)},addVideo:async e=>{let t=await s("/music/addVideo",e);return Promise.resolve(t)},login:async e=>{let t=await s("/login",e);return Promise.resolve(t)},getPlaylist:async e=>{let t=await s("/music/playlist/",e);return Promise.resolve(t)}};var g=new c;window.onload=()=>{let e=document.getElementsByTagName("form")[0];g.init(e),e.addEventListener("submit",y)};async function y(e){e.preventDefault();let t=g.formData(),{user:o}=await p.login(t);u(o),l(o)}})();
//# sourceMappingURL=index.js.map
