(()=>{var O=Object.create;var c=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var D=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var V=t=>c(t,"__esModule",{value:!0});var g=(t,e)=>()=>(t&&(e=t(t=0)),e);var i=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var _=(t,e,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of k(e))!H.call(t,n)&&n!=="default"&&c(t,n,{get:()=>e[n],enumerable:!(o=U(e,n))||o.enumerable});return t},s=t=>_(V(c(t!=null?O(D(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var l,b,f,S,h,d=g(()=>{l="https://bro-cloud.herokuapp.com",b=class{constructor(e=null){this.state={},this.customFn=e}updateState(e,o){this.state[e]=o}eventListener(e){let o=e.target.name,n=e.target.value;this.updateState.apply(this,[o,n])}init(e){let o=e.children;for(let n of o)(n.nodeName==="INPUT"||n.nodeName==="SELECT")&&n.addEventListener("input",this.eventListener.bind(this))}formData(){return this.state}},f=t=>{let e=document.querySelector(".error"),o=document.createTextNode(t);e.appendChild(o),setTimeout(()=>{e.innerText=""},2e4)},S=t=>{localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("userSignedUp",!0)},h=t=>{window.location.replace(`${l}/music/${t.clubId}/${t._id}`)}});var m=i(y=>{y.updateSignupBtn=(t,e,o=null)=>{let n=document.querySelector("#signup-submit--btn");n.innerText="",n.appendChild(t),o&&(n.dataset.clubId=o),n.dataset.clubName=e}});var N=i(L=>{var C=s(m());L.joinClubListener=function(){document.querySelector(".signup-join--club").addEventListener("click",e=>{let o=e.target.id,n=e.target.innerText,r=document.createTextNode(`Join ${n} Club`);(0,C.updateSignupBtn)(r,n,o)})}});var x=i(v=>{var w=s(m());v.createClubListener=function(){document.querySelector(".signup-create--club").addEventListener("input",e=>{let o=e.target.value,n=document.createTextNode(`Create ${o} Club`);(0,w.updateSignupBtn)(n,o)})}});var T,u,a,p,I=g(()=>{d();T=JSON.parse(localStorage.getItem("user")),u={headers:{"Content-Type":"application/json"},method:"POST"},a=async(t,e,o)=>{if(T){let{clubId:J,_id:F}=T;u.headers.Authorization=`${F} ${J}`}e&&(u.body=JSON.stringify(e)),o&&(u.method=o);let n=await fetch(l+t,u),r=await n.json();if(n.status>=200&&n.status<=299)return Promise.resolve(r);console.log(r),f(r.error)},p={signupJoin:async(t,e)=>{let o=await a(`/signup/join/${e}`,t);return Promise.resolve(o)},signupCreate:async(t,e)=>{let o=await a(`/signup/create/${e}`,t);return Promise.resolve(o)},search:async t=>{let e=await a("/youtube-api/search",t);return Promise.resolve(e)},addVideo:async t=>{let e=await a("/music/addVideo",t);return Promise.resolve(e)},login:async t=>{let e=await a("/login",t);return Promise.resolve(e)}}});var $=i(E=>{I();E.submitSignup=async t=>{let e=document.querySelector("#signup-submit--btn"),o=e.dataset.clubId;if(o)return p.signupJoin(t,o);let n=e.dataset.clubName;return p.signupCreate(t,n)}});d();var j=s(N()),B=s(x()),P=s($()),q=new b;window.onload=()=>{let t=document.getElementsByTagName("form")[0];q.init(t),t.addEventListener("submit",z),(0,j.joinClubListener)(),(0,B.createClubListener)()};async function z(t){t.preventDefault();let e=q.formData(),{user:o}=await(0,P.submitSignup)(e);S(o),h(o)}})();
//# sourceMappingURL=index.js.map
