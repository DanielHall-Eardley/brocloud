(()=>{var s="https://bro-cloud.herokuapp.com",c=class{constructor(){this.state={}}updateState(e){let o=e.target.name,r=e.target.value;this.state[o]=r}init(e){let o=e.children;for(let r of o)(r.nodeName==="INPUT"||r.nodeName==="SELECT")&&r.addEventListener("input",this.updateState.bind(this))}formData(){return this.state}},u={error:null,updateError(t){this.error=t},getError(){return this.error}};var d=JSON.parse(localStorage.getItem("user")),a={headers:{"Content-Type":"application/json"},method:"POST"},i=async(t,e,o)=>{if(d){let{clubId:n,_id:p}=d;a.headers.Authorization=`${p} ${n}`}e&&(a.body=JSON.stringify(e)),o&&(a.method=o);let r=await fetch(s+t,a);if(r.status>=200&&r.status<=299){let n=await r.json();return Promise.resolve(n)}u.updateError(r.error)},m={signup:async t=>{let e=await i("/signup",t);return Promise.resolve(e)},search:async t=>{let e=await i("/search",t);return Promise.resolve(e)},addVideo:async t=>{let e=await i("/addVideo",t);return Promise.resolve(e)}};var l=new c;window.onload=()=>{console.log("f");let t=document.querySelector(".signup--form");l.init(t),t.addEventListener("submit",f)};async function f(t){t.preventDefault();let e=l.formData(),o=await m.signup(e);console.log(o),localStorage.setItem("user",JSON.stringify(o.user)),window.location.replace(`${s}/music/${o.user.clubId}`)}})();
//# sourceMappingURL=index.js.map
