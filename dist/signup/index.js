(()=>{var s="http://localhost:3000",c=class{constructor(){this.state={}}updateState(t){let o=t.target.name,r=t.target.value;this.state[o]=r}init(t){let o=t.children;for(let r of o)(r.nodeName==="INPUT"||r.nodeName==="SELECT")&&r.addEventListener("input",this.updateState.bind(this))}formData(){return this.state}},u={error:null,updateError(e){this.error=e;let t=document.querySelector(".error"),o=document.createTextNode(e);t.appendChild(o),setTimeout(()=>{t.innerText=""},2e4)},getError(){return this.error}};var d=JSON.parse(localStorage.getItem("user")),a={headers:{"Content-Type":"application/json"},method:"POST"},i=async(e,t,o)=>{if(d){let{clubId:n,_id:p}=d;a.headers.Authorization=`${p} ${n}`}t&&(a.body=JSON.stringify(t)),o&&(a.method=o);let r=await fetch(s+e,a);if(r.status>=200&&r.status<=299){let n=await r.json();return Promise.resolve(n)}u.updateError(r.error)},m={signup:async e=>{let t=await i("/signup",e);return Promise.resolve(t)},search:async e=>{let t=await i("/search",e);return Promise.resolve(t)},addVideo:async e=>{let t=await i("/addVideo",e);return Promise.resolve(t)}};var l=new c;window.onload=()=>{let e=document.querySelector(".signup--form");l.init(e),e.addEventListener("submit",f)};async function f(e){e.preventDefault();let t=l.formData(),o=await m.signup(t);console.log(o),localStorage.setItem("user",JSON.stringify(o.user)),window.location.replace(`${s}/music/${o.user.clubId}`)}})();
//# sourceMappingURL=index.js.map
