(()=>{var O=Object.create;var m=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var V=t=>m(t,"__esModule",{value:!0});var b=(t,e)=>()=>(t&&(e=t(t=0)),e);var i=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var _=(t,e,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of U(e))!H.call(t,n)&&n!=="default"&&m(t,n,{get:()=>e[n],enumerable:!(o=D(e,n))||o.enumerable});return t},s=t=>_(V(m(t!=null?O(k(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var d,f,u,S,h,c=b(()=>{d="https://brocloud.ca",f=class{constructor(e=null){this.state={},this.customFn=e}updateState(e,o){this.state[e]=o}eventListener(e){let o=e.target.name,n=e.target.value;this.updateState.apply(this,[o,n])}init(e){let o=e.children;for(let n of o)if(n.nodeName==="INPUT"||n.nodeName==="SELECT"){let r=n.name;this.state[r]="",n.addEventListener("input",this.eventListener.bind(this))}}formData(){return this.state}},u=t=>{let e=document.querySelector(".error"),o=document.createTextNode(`${t.message}. Status: ${t.status}`);e.appendChild(o),setTimeout(()=>{e.innerText=""},2e4)},S=t=>{localStorage.setItem("user",JSON.stringify(t))},h=t=>{window.location.replace(`${d}/music/${t.clubId}/${t._id}`)}});var p=i(y=>{y.updateSignupBtn=(t,e,o=null)=>{let n=document.querySelector("#signup-submit--btn");delete n.dataset.clubId,n.innerText="",n.appendChild(t),o&&(n.dataset.clubId=o),n.dataset.clubName=e}});var C=i(N=>{var w=s(p());N.joinClubListener=function(){let t=document.querySelector(".signup-join--club");t&&t.addEventListener("click",e=>{let o=e.target.id,n=e.target.innerText,r=document.createTextNode(`Join ${n} Club`);(0,w.updateSignupBtn)(r,n,o)})}});var v=i(x=>{var L=s(p());x.createClubListener=function(){document.querySelector(".signup-create--club").addEventListener("input",e=>{let o=e.target.value,n=document.createTextNode(`Create ${o} Club`);(0,L.updateSignupBtn)(n,o)})}});var T,l,a,g,I=b(()=>{c();T=JSON.parse(localStorage.getItem("user")),l={headers:{"Content-Type":"application/json"},method:"POST"},a=async(t,e,o)=>{if(T){let{clubId:J,_id:F}=T;l.headers.Authorization=`${F} ${J}`}e&&(l.body=JSON.stringify(e)),o&&(l.method=o);let n=await fetch(d+t,l),r=await n.json();if(n.status>=200&&n.status<=299)return Promise.resolve(r);u(r)},g={signupJoin:async t=>{let e=await a("/signup/join",t);return Promise.resolve(e)},signupCreate:async t=>{let e=await a("/signup/create",t);return Promise.resolve(e)},search:async t=>{let e=await a("/youtube-api/search",t);return Promise.resolve(e)},addVideo:async t=>{let e=await a("/music/addVideo",t);return Promise.resolve(e)},login:async t=>{let e=await a("/login",t);return Promise.resolve(e)},getPlaylist:async t=>{let e=await a("/music/playlist/",t);return Promise.resolve(e)}}});var P=i(E=>{I();c();E.submitSignup=async t=>{let e=document.querySelector("#signup-submit--btn"),o=e.dataset.clubId,n=e.dataset.clubName;if(o)return t.clubId=o,g.signupJoin(t,o);if(n)return t.clubName=n,g.signupCreate(t);u({status:"401",message:"You must select an existing club or create a new one"})}});c();var $=s(C()),j=s(v()),B=s(P()),q=new f;window.onload=()=>{let t=document.getElementsByTagName("form")[0];q.init(t),t.addEventListener("submit",z),(0,$.joinClubListener)(),(0,j.createClubListener)()};async function z(t){t.preventDefault();let e=q.formData(),{user:o}=await(0,B.submitSignup)(e);S(o),h(o)}})();
//# sourceMappingURL=index.js.map
